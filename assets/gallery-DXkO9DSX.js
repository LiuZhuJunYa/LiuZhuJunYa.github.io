const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YunGallery-Ws_J0ToX.js","assets/app-Bd5bzCee.js","assets/app-CkXKbhvT.css","assets/YunPageHeader.vue_vue_type_script_setup_true_lang-CKFM3eXJ.js"])))=>i.map(i=>d[i]);
import{B as P,d as w,c as d,o as s,v as C,j as g,e as f,g as l,Y as A,al as D,am as S,x as B,q as h,y as V,P as $,a7 as E,ad as K,ae as G,s as O,a6 as T,an as Y,w as v,r as j,t as F,f as a,u as R,af as M,F as U,ac as I,ao as N}from"./app-Bd5bzCee.js";import{_ as z}from"./YunPageHeader.vue_vue_type_script_setup_true_lang-CKFM3eXJ.js";function H(r){const o=new TextEncoder;return window.crypto.subtle.importKey("raw",o.encode(r),"PBKDF2",!1,["deriveBits","deriveKey"])}function q(r,o){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function J(){const r=P(),{encrypt:o}=r.value,n=Uint8Array.from(Object.values(o.iv)),e=Uint8Array.from(Object.values(o.salt));return{decrypt:async(c,u)=>{if(!c)return;const y=await H(c),_=await q(y,e),i=Uint8Array.from(u,p=>p.charCodeAt(0)),t=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:n},_,i);return new TextDecoder().decode(t)}}}const L=w({__name:"YunGallery",props:{photos:{}},setup(r){return(o,n)=>{const e=C("VAGallery");return s(),d(e,{photos:o.photos},null,8,["photos"])}}}),W={key:0,"w-full":"","pt-14":"","pb-10":""},Q={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},X={key:1},Z=w({__name:"ValaxyGalleryDecrypt",props:{encryptedPhotos:{}},setup(r){const o=r,n=g(""),e=g(""),c=g(!1),{decrypt:u}=J();async function y(){const i=o.encryptedPhotos;if(i)try{const t=await u(n.value,i);e.value=t||""}catch{c.value=!0}}function _(){e.value="",n.value=""}return(i,t)=>{const p=L;return s(),f("div",null,[e.value?(s(),f("div",X,[h(p,{photos:JSON.parse(e.value)},null,8,["photos"]),l("div",{"w-full":"","text-center":"","mt-8":""},[l("button",{"m-auto":"",class:"btn","font-bold":"",onClick:_}," Encrypt Again ")])])):(s(),f("div",W,[l("div",Q,[A(l("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),"w-full":"",border:"","pl-5":"","pr-11":"","py-3":"",rounded:"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:B(c.value&&"border-red"),onInput:t[1]||(t[1]=m=>c.value=!1),onKeyup:S(y,["enter"])},null,34),[[D,n.value]]),l("div",{"cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"","text-gray":"","hover:text-black":"",onClick:y})])]))])}}}),ee={text:"center",class:"yun-text-light",p:"2"},te={class:"page-action",text:"center"},oe=["title"],ne=w({__name:"gallery",setup(r){const o=R(),{t:n}=V(),e=$(),c=E(e);K([G({"@type":"CollectionPage"})]);const u=O(()=>e.value.photos||[]),_=T().value.addons["valaxy-addon-lightgallery"]?Y(()=>N(()=>import("./YunGallery-Ws_J0ToX.js"),__vite__mapDeps([0,1,2,3]))):()=>null;return(i,t)=>{const p=I,m=z,x=Z,b=C("RouterView");return s(),f(U,null,[i.$slots["sidebar-child"]?(s(),d(p,{key:0},{default:v(()=>[j(i.$slots,"sidebar-child")]),_:3})):(s(),d(p,{key:1})),h(b,null,{default:v(({Component:k})=>[(s(),d(M(k),null,{"main-header":v(()=>[h(m,{title:a(c)||a(n)("title.gallery"),icon:a(e).icon||"i-ri-gallery-line",color:a(e).color,"page-title-class":a(e).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":v(()=>[l("div",ee,F(a(n)("counter.photos",u.value.length)),1),l("div",te,[l("a",{class:"yun-icon-btn",title:a(n)("accessibility.back"),onClick:t[0]||(t[0]=()=>a(o).back())},t[1]||(t[1]=[l("div",{"i-ri-arrow-go-back-line":""},null,-1)]),8,oe)]),a(e).encryptedPhotos?(s(),d(x,{key:0,"encrypted-photos":a(e).encryptedPhotos},null,8,["encrypted-photos"])):(s(),d(a(_),{key:1,photos:u.value},null,8,["photos"])),h(b)]),_:2},1024))]),_:1})],64)}}}),re=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{L as _,re as g};
