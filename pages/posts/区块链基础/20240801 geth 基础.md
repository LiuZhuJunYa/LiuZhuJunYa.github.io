---
title: geth 基础
date: 2024-08-01
tags: 
  - 区块链
  - 技术入门
  - 入门学习
categories: 
  - 区块链基础
---

## Geth 客户端安装

### 在 Ubuntu 中安装 Geth

```bash
$ sudo add-apt-repository -y ppa:ethereum/ethereum
$ sudo apt-get update
$ sudo apt-get install ethereum
```

## Geth 的操作以及相关说明

### 使用 Clef 生成账户

```bash
$ clef newaccount --keystore geth-tutorial/keystore
/****************
输入 ok，回车输入密码
****************/
```

> `Clef` 中用于生成新账户的特定函数是 `newaccount`，它接受一个参数 `--keystore`，该参数告诉它将新生成的密钥存储在何处。在此示例中，密钥库位置是一个将自动创建的新目录：`geth-tutorial/keystore`。
> 上面生成的账户可在本教程的其余部分用作主账户。但是，为了演示账户之间的交易，还需要有第二个账户。只需精确重复前面的步骤并提供相同的密码，即可将第二个账户添加到同一个密钥库中。

### 启动 Clef

Clef 使用密钥库中保存的私钥来签署交易。为此，需要在 Geth 运行时同时启动并保持 Clef 运行，以便两个程序可以相互通信。

```bash
$ clef --keystore geth-tutorial/keystore --configdir geth-tutorial/clef --chainid 11155111
```

> 密钥库文件位置
> 配置目录位置
> 链 ID，在本教程中，使用链 ID 11155111，即 Sepolia 测试网的链 ID。
> 终端应在本教程的整个过程中保持运行。如果教程停止并稍后重新启动，也必须通过运行上一个命令重新启动 Clef。

### 启动Geth

::: info
1. Geth 是以太坊客户端，它将计算机连接到以太坊网络。在本教程中，网络是 Sepolia，一个以太坊测试网。测试网用于在不存在任何现实价值风险的环境中测试以太坊客户端软件和智能合约。
2. 定义数据目录（Geth 应在其中保存区块链数据）
3. `--authrpc.addr localhost` 这个选项指定授权 RPC 服务监听的地址为 localhost。授权 RPC 是一种受保护的接口，用于与其他服务（例如 EthSigner）安全地进行通信。`--authrpc.port 8551` 这个选项指定授权 RPC 服务监听的端口为 8551。`--authrpc.vhosts localhost` 这个选项指定允许哪些主机可以访问授权 RPC 服务，这里设置为 localhost。`--authrpc.jwtsecret geth-tutorial/jwtsecret` 这个选项指定 JWT 秘钥文件的路径，为 geth-tutorial/jwtsecret。JWT 秘钥用于授权 RPC 的身份验证。
4. `--http` 这个选项启用 HTTP RPC 服务。HTTP RPC 允许通过 HTTP 协议与 Geth 节点进行交互。`--http.api eth,net` 这个选项指定启用的 HTTP RPC API 模块，eth 和 net。eth 模块用于与以太坊区块链进行交互，net 模块用于网络相关信息的获取。
5. `--signer=geth-tutorial/clef/clef.ipc` 这个选项指定 Clef 签名器的 IPC 文件路径。Clef 是一个专用的账户管理和交易签名工具，与 Geth 集成使用可以提高安全性。
:::

```bash
$ geth --sepolia --datadir geth-tutorial --authrpc.addr localhost --authrpc.port 8551 --authrpc.vhosts localhost --authrpc.jwtsecret geth-tutorial/jwtsecret --http --http.api eth,net --signer=geth-tutorial/clef/clef.ipc --http

$ geth --sepolia --datadir geth-tutorial --authrpc.addr 0.0.0.0 --authrpc.port 8551 --authrpc.vhosts=* --authrpc.jwtsecret geth-tutorial/jwtsecret --http --http.addr 0.0.0.0 --http.api eth,net --signer=geth-tutorial/clef/clef.ipc
```

